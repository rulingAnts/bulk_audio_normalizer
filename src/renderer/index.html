<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; script-src 'self';" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bulk Audio Normalizer (-16 LUFS, 16-bit WAV)</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>Bulk Audio Normalizer</h1>
      <p>Converts to 16-bit WAV and normalizes to -16 LUFS with a hard limiter (no clipping).</p>
    </header>

    <section class="controls">
      <div class="picker">
        <label>Input folder</label>
        <div class="row">
          <input id="inputPath" type="text" placeholder="Choose input folder" readonly />
          <button id="btnInput">Browse…</button>
        </div>
      </div>
      <div class="picker">
        <label>Output folder (must be empty)</label>
        <div class="row">
          <input id="outputPath" type="text" placeholder="Choose empty output folder" readonly />
          <button id="btnOutput">Browse…</button>
        </div>
        <div id="outputValidation" class="hint"></div>
      </div>
      <div class="actions">
        <button id="btnStart" disabled>Start</button>
        <button id="btnCancel" disabled>Cancel</button>
      </div>
    </section>

    <section class="overall">
      <div class="row label-row">
        <span>Overall progress</span>
        <span id="overallPct">0%</span>
      </div>
      <div class="progress"><div id="overallBar" class="bar" style="width:0%"></div></div>
    </section>

    <section class="settings">
      <h2>Settings</h2>
      <div class="grid">
        <label for="lufsTarget">LUFS target</label>
        <input id="lufsTarget" type="number" step="0.1" value="-16" />

        <label for="tpMargin">True-peak target (dBFS)</label>
        <input id="tpMargin" type="number" step="0.1" value="-1" />

        <label for="limiterLimit">Limiter ceiling (linear 0..1)</label>
        <input id="limiterLimit" type="number" step="0.01" min="0" max="1" value="0.97" />

        <label for="concurrency">Concurrency</label>
        <input id="concurrency" type="number" min="1" max="16" value="4" />
      </div>
      <div class="hint">Tip: Lower limiter ceiling (e.g., 0.97) for extra headroom. TP is in dBFS (negative values).</div>
    </section>

    <section class="files">
      <h2>Files</h2>
      <div id="fileList" class="file-list"></div>
    </section>

    <section class="logs">
      <h2>Log</h2>
      <div class="log-actions">
        <button id="btnClearLog">Clear log</button>
      </div>
      <pre id="logView" class="log-view"></pre>
    </section>

    <footer>
      <small>Tip: Hundreds of short WAVs are fine. The app won’t modify originals; it writes new files to the output folder.</small>
    </footer>

    <script src="renderer.js"></script>
  </body>
</html>
